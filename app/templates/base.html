<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}JSN Holdings Foreclosure Manager{% endblock %}</title>
    
    <!-- Existing CSS -->
    <link rel="stylesheet" href="{{ url_for('static', path='/style.css') }}">
    
    <!-- ADD THIS LINE: -->
    <link rel="stylesheet" href="{{ url_for('static', path='/style_mobile.css') }}">
</head>
  <body>
    <header class="container">
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <h1>JSN Holdings Foreclosure Manager</h1>
    {% if request.cookies.get('session_token') %}
    <div style="font-size: 0.9em; color: #a7b0c0;">
      Logged in | 
      <a href="/profile">Profile</a> | 
      <a href="/users">Users</a> | 
      <a href="/logout">Logout</a>
    </div>
    {% endif %}
  </div>
  <nav>
    <a href="/">Cases</a> | <a href="/import">Update Case List</a> | <a href="/dashboard">Dashboard</a>
  </nav>
</header>

    <main class="container">
      {% block content %}{% endblock %}
    </main>

    <div id="busyOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:1000;">
      <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:1rem 1.5rem; border-radius:10px; box-shadow:0 10px 24px rgba(0,0,0,0.2); text-align:center;">
        <div class="spinner" style="width:36px; height:36px; border:4px solid #ddd; border-top-color:#333; border-radius:50%; margin:0 auto 0.75rem; animation:spin 1s linear infinite;"></div>
        <div><strong>Updating cases…</strong><div>Please don’t navigate away.</div></div>
      </div>
    </div>

    <style>@keyframes spin{to{transform:rotate(360deg)}}</style>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        document.querySelectorAll('form[data-busy-overlay]').forEach(function(f){
          f.addEventListener('submit', function(){ document.getElementById('busyOverlay').style.display='block'; });
        });
      });
    </script>
  </body>
</html>
