{% extends "base.html" %}
{% block content %}

<h2>My Profile</h2>

{% if error %}
<div class="error" style="background: #fee; color: #c33; padding: 12px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #c33;">
    {{ error }}
</div>
{% endif %}

{% if success %}
<div class="success" style="background: #efe; color: #373; padding: 12px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #373;">
    {{ success }}
</div>
{% endif %}

<div class="profile-container" style="max-width: 800px;">
    <div class="profile-info" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
        <h3 style="margin-top: 0;">Account Information</h3>
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Full Name:</strong> {{ user.full_name or '—' }}</p>
        <p><strong>Role:</strong> {% if user.is_admin %}Administrator{% else %}User{% endif %}</p>
        <p><strong>Account Created:</strong> {{ user.created_at.strftime('%Y-%m-%d') if user.created_at else '—' }}</p>
        <p><strong>Last Login:</strong> {{ user.last_login.strftime('%Y-%m-%d %H:%M') if user.last_login else 'Never' }}</p>
    </div>
    
    <div class="password-change">
        <h3>Change Password</h3>
        <form method="post" action="/profile/change-password" style="margin-top: 20px;">
            <div class="form-group" style="margin-bottom: 20px;">
                <label>Current Password *</label>
                <input type="password" name="current_password" required>
            </div>
            
            <div class="form-group" style="margin-bottom: 20px;">
                <label>New Password *</label>
                <input type="password" name="new_password" required minlength="8"
                       placeholder="Minimum 8 characters">
                <small style="color: #666; font-size: 0.85em;">Must be at least 8 characters</small>
            </div>
            
            <div class="form-group" style="margin-bottom: 20px;">
                <label>Confirm New Password *</label>
                <input type="password" name="confirm_password" required minlength="8">
            </div>
            
            <button type="submit" class="btn">Change Password</button>
        </form>
    </div>
</div>

<style>
.form-group label {
    display: block;
    margin-bottom: 6px;
    font-weight: 500;
}
.form-group input[type="password"] {
    width: 100%;
    max-width: 400px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 15px;
}
.profile-info p {
    margin: 10px 0;
}
</style>

{% endblock %}